---
export interface Props {
    pageTitle: String;
    description: String;
}

import Header from "../components/Header.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import "../styles/main.min.css";

const { pageTitle, description = "" } = Astro.props;
---

<!doctype html>
<html lang="en">
    <head>
        <!-- Google Tag Manager -->
        <script>
            (function (w, d, s, l, i) {
                w[l] = w[l] || [];
                w[l].push({
                    "gtm.start": new Date().getTime(),
                    event: "gtm.js",
                });
                var f = d.getElementsByTagName(s)[0],
                    j = d.createElement(s),
                    dl = l != "dataLayer" ? "&l=" + l : "";
                j.async = true;
                j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
                f.parentNode.insertBefore(j, f);
            })(window, document, "script", "dataLayer", "GTM-W8HLQ52K");
        </script>
        <!-- End Google Tag Manager -->
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{pageTitle} | Newark Tyres</title>
        <meta name="description" content=`${description}` />
        <link rel="stylesheet" href="/styles/main.min.css" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
        />
    </head>

    <body>
        <!-- Google Tag Manager (noscript) -->
        <noscript
            ><iframe
                src="https://www.googletagmanager.com/ns.html?id=GTM-W8HLQ52K"
                height="0"
                width="0"
                style="display:none;visibility:hidden"></iframe></noscript
        >
        <!-- End Google Tag Manager (noscript) -->
        <Header />
        <Navbar />
        <slot />
        <Footer />
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                // Get the current path from the URL
                var currentPath = window.location.pathname;

                // Find the matching navbar links (main and dropdown) and add the 'active' class
                var navbarLinks = document.querySelectorAll(
                    ".navbar-nav .nav-link"
                );
                navbarLinks.forEach(function (link) {
                    var linkPath = link.getAttribute("href");
                    if (currentPath === linkPath) {
                        link.classList.add("active");
                    }
                });

                // Handle dropdown links
                var dropdownLinks = document.querySelectorAll(
                    ".navbar-nav .dropdown-item"
                );
                dropdownLinks.forEach(function (link) {
                    var linkPath = link.getAttribute("href");
                    if (currentPath === linkPath) {
                        link.classList.add("active");
                        // Also add 'active' class to the parent dropdown
                        var dropdownParent = link.closest(".dropdown");
                        if (dropdownParent) {
                            dropdownParent
                                .querySelector(".nav-link")
                                .classList.add("active");
                        }
                    }
                });
            });
        </script>

        <!--Start of Tawk.to Script-->
        <script type="text/javascript">
            var Tawk_API = Tawk_API || {},
                Tawk_LoadStart = new Date();
            (function () {
                var s1 = document.createElement("script"),
                    s0 = document.getElementsByTagName("script")[0];
                s1.async = true;
                s1.src =
                    "https://embed.tawk.to/659a56f38d261e1b5f506625/1hjhe7acr";
                s1.charset = "UTF-8";
                s1.setAttribute("crossorigin", "*");
                s0.parentNode.insertBefore(s1, s0);
            })();
        </script>
        <!--End of Tawk.to Script-->
    </body>
</html>
